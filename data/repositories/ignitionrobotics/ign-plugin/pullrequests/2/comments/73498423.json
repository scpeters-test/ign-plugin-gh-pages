{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-plugin/pullrequests/2/comments/73498423.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-plugin/diff/ignitionrobotics/ign-plugin:10eddbc54b6f..b11b650535bb?path=loader%2Fsrc%2FLoader.cc"}, "html": {"href": "#!/ignitionrobotics/ign-plugin/pull-requests/2/_/diff#comment-73498423"}}, "parent": {"id": 73489392, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-plugin/pullrequests/2/comments/73489392.json"}, "html": {"href": "#!/ignitionrobotics/ign-plugin/pull-requests/2/_/diff#comment-73489392"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 2, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-plugin/pullrequests/2.json"}, "html": {"href": "#!/ignitionrobotics/ign-plugin/pull-requests/2"}}, "title": "Part 3: Better plugin registration and management"}, "content": {"raw": "That's almost exactly correct. The reference counter of the `shared_ptr` gets incremented when plugin classes taken from the library are instantiated, and the library will be unloaded when that `shared_ptr` gets deleted \\(i.e. if all plugin class instances from that library are deleted and the loader is either deleted or told to forget that library\\).\n\nI\u2019ve expanded on the role of this member in comments here: 907125d\n\nThe short version is that the role of this map is to ensure that each Loader has a single authority on the reference counting of each library that it has loaded.", "markup": "markdown", "html": "<p>That's almost exactly correct. The reference counter of the <code>shared_ptr</code> gets incremented when plugin classes taken from the library are instantiated, and the library will be unloaded when that <code>shared_ptr</code> gets deleted (i.e. if all plugin class instances from that library are deleted and the loader is either deleted or told to forget that library).</p>\n<p>I\u2019ve expanded on the role of this member in comments here: <a href=\"#!/ignitionrobotics/ign-plugin/commits/907125d\" rel=\"nofollow\" class=\"ap-connect-link\">907125d</a></p>\n<p>The short version is that the role of this map is to ensure that each Loader has a single authority on the reference counting of each library that it has loaded.</p>", "type": "rendered"}, "created_on": "2018-08-21T03:19:45.122424+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {"to": null, "from": null, "outdated": false, "path": "loader/src/Loader.cc"}, "updated_on": "2018-08-21T03:19:45.130746+00:00", "type": "pullrequest_comment", "id": 73498423}