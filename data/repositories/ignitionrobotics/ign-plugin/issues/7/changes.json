{"pagelen": 100, "values": [{"changes": {"content": {"new": "# Prerequisites\r\n\r\n* \\[X \\] Put an X between the brackets on this line if you have done all of the following:\r\n\r\n    * Checked the Q&A board for common solutions: [http://answers.gazebosim.org](http://answers.gazebosim.org)\r\n    * Checked that your issue isn't already filed.\r\n    * Checked that there is not already an Ignition package that provides the described functionality: [https://ignitionrobotics.org/libs](https://ignitionrobotics.org/libs)\r\n    \r\n\r\n# Description\r\n\r\n`INTEGRATION_WeakPluginPtr` is failing on my machine.\r\n\r\n# Steps to Reproduce\r\n\r\n1. Run `INTEGRATION_WeakPluginPtr`\r\n\r\n**Expected behavior:**\r\n\r\nPASSED\r\n\r\n**Actual behavior:**\r\n\r\n```\r\n[==========] Running 2 tests from 1 test case.\r\n[----------] Global test environment set-up.\r\n[----------] 2 tests from WeakPluginPtr\r\n[ RUN      ] WeakPluginPtr.Lifecycle\r\n/home/juan/ignition_workspace/src/ign-plugin/test/integration/WeakPluginPtr.cc:59: Failure\r\nExpected equality of these values:\r\n  nullptr\r\n    Which is: NULL\r\n  dlHandle\r\n    Which is: 0x55fdb805a330\r\n[  FAILED  ] WeakPluginPtr.Lifecycle (0 ms)\r\n[ RUN      ] WeakPluginPtr.CopyMove\r\n[       OK ] WeakPluginPtr.CopyMove (0 ms)\r\n[----------] 2 tests from WeakPluginPtr (0 ms total)\r\n\r\n[----------] Global test environment tear-down\r\n[==========] 2 tests from 1 test case ran. (0 ms total)\r\n[  PASSED  ] 1 test.\r\n[  FAILED  ] 1 test, listed below:\r\n[  FAILED  ] WeakPluginPtr.Lifecycle\r\n```\r\n\r\n**Reproduces how often:**\r\n\r\nAlways\r\n\r\n# Versions\r\n\r\n```\r\n$ lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 18.04.3 LTS\r\nRelease:    18.04\r\nCodename:   bionic\r\n\r\n$ gcc --version\r\ngcc (Ubuntu 8.3.0-6ubuntu1~18.04.1) 8.3.0\r\nCopyright (C) 2018 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n```\r\n\r\n# Additional Information\r\n\r\nThe error points to the macro `CHECK_FOR_LIBRARY` defined on `integration/utils.hh`\r\n\r\nThere\u2019s a comment there saying:\r\n\r\n> /////////////////////////////////////////////////  \r\n> // Note \\(MXG\\): According to some online discussions, there is no guarantee  \r\n> // that a correct number of calls to dlclose\\(void\\*\\) will actually unload the  \r\n> // shared library. In fact, there is no guarantee that a dynamically loaded  \r\n> // library from dlopen will ever be unloaded until the program is terminated.  \r\n> // This may cause dlopen\\(~, RTLD\\_NOLOAD\\) to return a non-null handle even if  \r\n> // we are managing the handles correctly. If the test for  \r\n> // EXPECT\\_EQ\\(nullptr, dlHandle\\) is found to fail occasionally, we should  \r\n> // consider removing it because it may be unreliable. At the very least, if  \r\n> // it fails very infrequently, then we can safely consider the failures to be  \r\n> // false negatives and may want to consider relaxing this test.\r\n\r\nAvoiding the check `EXPECT_EQ(nullptr, dlHandle)` in the macro `CHECK_FOR_LIBRARY` makes the test pass.", "old": "Bug Report Template  \r\nCopy, paste, and then fill-out this template in the description field to submit a bug report.\r\n\r\n# Prerequisites\r\n\r\n* \\[X \\] Put an X between the brackets on this line if you have done all of the following:\r\n\r\n    * Checked the Q&A board for common solutions: [http://answers.gazebosim.org](http://answers.gazebosim.org)\r\n    * Checked that your issue isn't already filed.\r\n    * Checked that there is not already an Ignition package that provides the described functionality: [https://ignitionrobotics.org/libs](https://ignitionrobotics.org/libs)\r\n    \r\n\r\n# Description\r\n\r\n`INTEGRATION_WeakPluginPtr` is failing on my machine.\r\n\r\n# Steps to Reproduce\r\n\r\n1. Run `INTEGRATION_WeakPluginPtr`\r\n\r\n**Expected behavior:**\r\n\r\nPASSED\r\n\r\n**Actual behavior:**\r\n\r\n```\r\n[==========] Running 2 tests from 1 test case.\r\n[----------] Global test environment set-up.\r\n[----------] 2 tests from WeakPluginPtr\r\n[ RUN      ] WeakPluginPtr.Lifecycle\r\n/home/juan/ignition_workspace/src/ign-plugin/test/integration/WeakPluginPtr.cc:59: Failure\r\nExpected equality of these values:\r\n  nullptr\r\n    Which is: NULL\r\n  dlHandle\r\n    Which is: 0x55fdb805a330\r\n[  FAILED  ] WeakPluginPtr.Lifecycle (0 ms)\r\n[ RUN      ] WeakPluginPtr.CopyMove\r\n[       OK ] WeakPluginPtr.CopyMove (0 ms)\r\n[----------] 2 tests from WeakPluginPtr (0 ms total)\r\n\r\n[----------] Global test environment tear-down\r\n[==========] 2 tests from 1 test case ran. (0 ms total)\r\n[  PASSED  ] 1 test.\r\n[  FAILED  ] 1 test, listed below:\r\n[  FAILED  ] WeakPluginPtr.Lifecycle\r\n```\r\n\r\n**Reproduces how often:**\r\n\r\nAlways\r\n\r\n# Versions\r\n\r\n```\r\n$ lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 18.04.3 LTS\r\nRelease:\t18.04\r\nCodename:\tbionic\r\n\r\n$ gcc --version\r\ngcc (Ubuntu 8.3.0-6ubuntu1~18.04.1) 8.3.0\r\nCopyright (C) 2018 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n```\r\n\r\n# Additional Information\r\n\r\nThe error points to the macro `CHECK_FOR_LIBRARY` defined on `integration/utils.hh`\r\n\r\nThere\u2019s a comment there saying:\r\n\r\n> /////////////////////////////////////////////////  \r\n> // Note \\(MXG\\): According to some online discussions, there is no guarantee  \r\n> // that a correct number of calls to dlclose\\(void\\*\\) will actually unload the  \r\n> // shared library. In fact, there is no guarantee that a dynamically loaded  \r\n> // library from dlopen will ever be unloaded until the program is terminated.  \r\n> // This may cause dlopen\\(~, RTLD\\_NOLOAD\\) to return a non-null handle even if  \r\n> // we are managing the handles correctly. If the test for  \r\n> // EXPECT\\_EQ\\(nullptr, dlHandle\\) is found to fail occasionally, we should  \r\n> // consider removing it because it may be unreliable. At the very least, if  \r\n> // it fails very infrequently, then we can safely consider the failures to be  \r\n> // false negatives and may want to consider relaxing this test.\r\n\r\nAvoiding the check `EXPECT_EQ(nullptr, dlHandle)` in the macro `CHECK_FOR_LIBRARY` makes the test pass."}}, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-plugin/issues/7/changes/56724577.json"}, "html": {"href": "#!/ignitionrobotics/ign-plugin/issues/7#comment-56724577"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-plugin/issues/7.json"}}, "type": "issue", "id": 7, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-plugin.json"}, "html": {"href": "#!/ignitionrobotics/ign-plugin"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f4e3de89-d527-44d3-b10f-fde17d644890}ts=c_plus_plus"}}, "type": "repository", "name": "ign-plugin", "full_name": "ignitionrobotics/ign-plugin", "uuid": "{f4e3de89-d527-44d3-b10f-fde17d644890}"}, "title": "INTEGRATION_WeakPluginPtr test fails"}, "created_on": "2020-03-30T19:56:49.904751+00:00", "user": {"display_name": "Juan Oxoby", "uuid": "{7d3743fc-bfd8-4e48-a53b-9cc0a264f66d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7d3743fc-bfd8-4e48-a53b-9cc0a264f66d%7D"}, "html": {"href": "https://bitbucket.org/%7B7d3743fc-bfd8-4e48-a53b-9cc0a264f66d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/3d4b2394d4fc0cf52ce2d5d797d60b25d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJO-0.png"}}, "nickname": "Juan Oxoby", "type": "user", "account_id": "5e544adb96f7d50ca05430ce"}, "message": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "type": "issue_change", "id": 56724577}], "page": 1, "size": 1}