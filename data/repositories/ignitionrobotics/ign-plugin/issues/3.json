{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-plugin.json"}, "html": {"href": "#!/ignitionrobotics/ign-plugin"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f4e3de89-d527-44d3-b10f-fde17d644890}ts=c_plus_plus"}}, "type": "repository", "name": "ign-plugin", "full_name": "ignitionrobotics/ign-plugin", "uuid": "{f4e3de89-d527-44d3-b10f-fde17d644890}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-plugin/issues/3/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-plugin/issues/3.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-plugin/issues/3/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-plugin/issues/3/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-plugin/issues/3/loadlibrary-is-a-system-function-on"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-plugin/issues/3/vote"}}, "reporter": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "title": "LoadLibrary is a system function on Windows", "component": null, "votes": 0, "watches": 1, "content": {"raw": "# Description \r\n\r\nThe function provided by ign-plugin `LoadLibrary` conflicts with a [system macro in Windows](https://docs.microsoft.com/en-us/cpp/build/loadlibrary-and-afxloadlibrary?view=vs-2017).\r\n\r\n# Steps to Reproduce\r\n\r\n1. Include `windows.h` in any file using `LoadLibrary` . i.e.:\r\n```diff\r\ndiff -r 226424193246 test/integration/plugin.cc\r\n--- a/test/integration/plugin.cc        Fri Nov 02 17:58:25 2018 +0000\r\n+++ b/test/integration/plugin.cc        Sat Dec 15 01:45:10 2018 +0100\r\n@@ -30,6 +30,8 @@\r\n\r\n #include \"../plugins/DummyPlugins.hh\"\r\n #include \"utils.hh\"\r\n+#include \"windows.h\"\r\n+\r\n\r\n /////////////////////////////////////////////////\r\n TEST(Loader, LoadBadPlugins)\r\n```\r\n\r\n2. Compile it on Windows. The following error appears:\r\n\r\n```\r\n  c:\\users\\jrivero\\code\\ws_plugin\\src\\ign-plugin\\test\\integration\\plugin.cc(50): error C2039: 'LoadLibraryA': is not a member of 'ignition::plugin::Lo\r\nader' [C:\\Users\\jrivero\\code\\ws_plugin\\build\\ignition-plugin1\\test\\integration\\INTEGRATION_plugin.vcxproj]\r\n```\r\n\r\n**Expected behavior:**  \r\n\r\nNot to call system function but ign-plugin LoadLibrary\r\n\r\n**Actual behavior:**\r\n\r\nCompiler error.\r\n\r\n**Reproduces how often:** \r\n\r\nAlways\r\n\r\n# Versions\r\n\r\nTested on `default` branch\r\n\r\n# Additional Information\r\n\r\nRenaming the function and deprecate LoadLibrary comes to my mind as the easy way but not sure if we can find a better approach to solve it.", "markup": "markdown", "html": "<h1 id=\"markdown-header-description\">Description</h1>\n<p>The function provided by ign-plugin <code>LoadLibrary</code> conflicts with a <a data-is-external-link=\"true\" href=\"https://docs.microsoft.com/en-us/cpp/build/loadlibrary-and-afxloadlibrary?view=vs-2017\" rel=\"nofollow\">system macro in Windows</a>.</p>\n<h1 id=\"markdown-header-steps-to-reproduce\">Steps to Reproduce</h1>\n<ol>\n<li>Include <code>windows.h</code> in any file using <code>LoadLibrary</code> . i.e.:</li>\n</ol>\n<div class=\"codehilite language-diff\"><pre><span></span><span class=\"gh\">diff -r 226424193246 test/integration/plugin.cc</span>\n<span class=\"gd\">--- a/test/integration/plugin.cc        Fri Nov 02 17:58:25 2018 +0000</span>\n<span class=\"gi\">+++ b/test/integration/plugin.cc        Sat Dec 15 01:45:10 2018 +0100</span>\n<span class=\"gu\">@@ -30,6 +30,8 @@</span>\n\n #include &quot;../plugins/DummyPlugins.hh&quot;\n #include &quot;utils.hh&quot;\n<span class=\"gi\">+#include &quot;windows.h&quot;</span>\n<span class=\"gi\">+</span>\n\n /////////////////////////////////////////////////\n TEST(Loader, LoadBadPlugins)\n</pre></div>\n\n\n<ol>\n<li>Compile it on Windows. The following error appears:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span>  c:\\users\\jrivero\\code\\ws_plugin\\src\\ign-plugin\\test\\integration\\plugin.cc(50): error C2039: &#39;LoadLibraryA&#39;: is not a member of &#39;ignition::plugin::Lo\nader&#39; [C:\\Users\\jrivero\\code\\ws_plugin\\build\\ignition-plugin1\\test\\integration\\INTEGRATION_plugin.vcxproj]\n</pre></div>\n\n\n<p><strong>Expected behavior:</strong>  </p>\n<p>Not to call system function but ign-plugin LoadLibrary</p>\n<p><strong>Actual behavior:</strong></p>\n<p>Compiler error.</p>\n<p><strong>Reproduces how often:</strong> </p>\n<p>Always</p>\n<h1 id=\"markdown-header-versions\">Versions</h1>\n<p>Tested on <code>default</code> branch</p>\n<h1 id=\"markdown-header-additional-information\">Additional Information</h1>\n<p>Renaming the function and deprecate LoadLibrary comes to my mind as the easy way but not sure if we can find a better approach to solve it.</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-12-15T00:47:39.597150+00:00", "milestone": null, "updated_on": "2020-03-10T00:27:15.684891+00:00", "type": "issue", "id": 3}